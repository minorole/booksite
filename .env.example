############################################
# Booksite – Example .env configuration
# Copy to .env.local and customize values
############################################

############################################
# OpenAI (required)
############################################
# Where to find: https://platform.openai.com → Dashboard → API keys
# ADMIN key (used by server/orchestrator and embeddings)
OPENAI_API_KEY=sk-admin-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# USER key (optional; if set, used for user-facing LLM calls)
OPENAI_API_KEY_USER=sk-user-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Model overrides (optional)
# Default text and vision model fall back to OPENAI_CONFIG in src/lib/openai.ts
# OPENAI_TEXT_MODEL=gpt-5-mini
# OPENAI_VISION_MODEL=gpt-5-mini
# Embeddings override (defaults to text-embedding-3-small)
# OPENAI_EMBEDDINGS_MODEL=text-embedding-3-small

# API mode (optional): 1 = Responses API (default for Agents), 0 = Chat Completions
OPENAI_USE_RESPONSES=1

# Extra debugging (optional): 1 = verbose server logs for OpenAI operations
DEBUG_LOGS=0

############################################
# Supabase (required)
############################################
# Where to find URL: Supabase Dashboard → Project Settings → API → Project URL
NEXT_PUBLIC_SUPABASE_URL=https://vhybzprnhcctygetvbwr.supabase.co
# Where to find anon key: Supabase Dashboard → Project Settings → API → anon public
NEXT_PUBLIC_SUPABASE_ANON_KEY=<paste-your-anon-key-from-dashboard>

############################################
# App configuration (required)
############################################
# Email that is granted SUPER_ADMIN on first login
SUPER_ADMIN_EMAIL=admin@example.com

############################################
# Cloudinary (required for image uploads)
############################################
# Where to find: Cloudinary Dashboard → Account Details → API Environment variable
# Prefer the single URL form:
CLOUDINARY_URL=cloudinary://123456789012345:abcdefghijklmnopqrstuvwxyz1234@my_cloud
# Alternatively, set individual values (not required if CLOUDINARY_URL is set):
# CLOUDINARY_CLOUD_NAME=my_cloud
# CLOUDINARY_API_KEY=123456789012345
# CLOUDINARY_API_SECRET=abcdefghijklmnopqrstuvwxyz1234

# Optional: temp uploads configuration
# Folder prefix for temporary uploads (with or without trailing slash)
CLOUDINARY_TEMP_PREFIX=temp-uploads/
# Default retention (days) for temp assets when not specified by the purge job
CLOUDINARY_TEMP_RETENTION_DAYS=7

############################################
# Admin AI tracing/logging (optional)
############################################
# Server-side flags (see src/lib/observability/toggle.ts)
# Disable server trace logs completely
ADMIN_AI_TRACE_DISABLED=0
# Include sensitive data in traces (defaults to false)
ADMIN_AI_TRACE_SENSITIVE=0

# Client-side console tracing for Admin AI UI
NEXT_PUBLIC_ADMIN_AI_TRACE=1
NEXT_PUBLIC_ADMIN_AI_TRACE_DISABLED=0

# Agent run limits (optional; default is 12 – see src/lib/admin/constants.ts)
AGENT_MAX_TURNS=12

############################################
# Maintenance (optional but recommended)
############################################
# Secret token for cron-authenticated maintenance endpoints (e.g., reference-aware temp purge)
# Recommended: schedule a platform cron (e.g., Vercel Cron) to call:
#   POST /api/admin/cloudinary/purge?days=7&dry=0&token=$ADMIN_TASK_TOKEN
ADMIN_TASK_TOKEN=

############################################
# Vercel KV (optional for local dev; auto on Vercel)
############################################
# On Vercel, KV env vars are injected automatically when you attach a KV store
# (Project → Storage → KV). For local dev, set these to exercise rate limiting:
# KV_REST_API_URL=https://<your-kv-id>.kv.vercel-storage.com
# KV_REST_API_TOKEN=vercel_kv_xxx
# Alternatively, to run fully local without a KV store, enable an in‑memory
# development backend (not allowed in production):
# KV_USE_MEMORY=1

############################################
# Self-hosted image embeddings (optional)
############################################
# Enable to use OpenCLIP service for image duplicate detection
# IMAGE_EMBEDDINGS_PROVIDER=clip
# CLIP endpoint that accepts POST { image_url } and returns { embedding: number[512] }
# CLIP_EMBEDDINGS_URL=https://clip.example.com/embed
# Optional bearer token
# CLIP_EMBEDDINGS_API_KEY=example-clip-token
# Strict mode: 1 = fail duplicate checks if CLIP is unavailable
# IMAGE_EMBEDDINGS_STRICT=0

############################################
# Next.js environment (optional)
############################################
# NODE_ENV=development

############################################
# Optional: Direct Postgres URLs (external tooling only)
############################################
# The app uses Supabase client APIs. These are only for external tools/scripts.
# DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/DB_NAME?schema=public
# DIRECT_URL=postgresql://USER:PASSWORD@HOST:PORT/DB_NAME?schema=public
